~H"""
<div class="flex gap-4 mb-6">
  <.link navigate={~p"/workflows"} class="text-blue-600 hover:text-blue-800">
    ‚Üê Back to Workflows
  </.link>
</div>

<.header>
  Workflow Details
  <:subtitle>Workflow <%= @workflow.id %></:subtitle>
</.header>

<div class="grid gap-6 lg:grid-cols-2">
  <div class="rounded-lg bg-white shadow-sm ring-1 ring-zinc-900/5">
    <div class="border-b border-zinc-200 px-6 py-4">
      <h2 class="text-base font-semibold text-zinc-900">Workflow Information</h2>
    </div>
    <div class="px-6 py-4 space-y-3">
      <div>
        <p class="text-sm font-medium text-zinc-500">Incident ID</p>
        <p class="text-sm text-zinc-900"><%= @workflow.incident_id %></p>
      </div>
      <div>
        <p class="text-sm font-medium text-zinc-500">Status</p>
        <p class="text-sm text-zinc-900"><%= @workflow.status %></p>
      </div>
      <div>
        <p class="text-sm font-medium text-zinc-500">Current Step</p>
        <p class="text-sm text-zinc-900"><%= @workflow.current_step %></p>
      </div>
      <div>
        <p class="text-sm font-medium text-zinc-500">Retry Count</p>
        <p class="text-sm text-zinc-900"><%= @workflow.retry_count %></p>
      </div>
    </div>
  </div>

  <div class="rounded-lg bg-white shadow-sm ring-1 ring-zinc-900/5">
    <div class="border-b border-zinc-200 px-6 py-4">
      <h2 class="text-base font-semibold text-zinc-900">Context Versions</h2>
    </div>
    <div class="px-6 py-4 max-h-64 overflow-y-auto">
      <%= if @context_versions == [] do %>
        <p class="text-sm text-zinc-500">No context versions</p>
      <% else %>
        <div class="space-y-2">
          <%= for cv <- @context_versions do %>
            <div class="border border-zinc-200 rounded-lg p-3">
              <div class="flex justify-between mb-2">
                <p class="text-sm font-medium text-zinc-900">Step <%= cv.step_number %></p>
                <p class="text-xs text-zinc-500"><%= Calendar.strftime(cv.inserted_at, "%H:%M:%S") %></p>
              </div>
              <p class="text-xs text-zinc-500"><%= cv.agent_id || "System" %></p>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
"""
