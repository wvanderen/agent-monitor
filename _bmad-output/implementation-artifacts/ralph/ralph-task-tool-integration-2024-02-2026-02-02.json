{
  "completion_promise": "<promise>COMPLETE</promise>",
  "max_iterations": 20,
  "active": true,
  "task_format": "structured_json_feature_list",
  "requirement_mappings": {
    "tool-integration-2024-02": {
      "title": "Add Notification Tools and Automated Remediation",
      "requirements": [
        {
          "id": "REQ-1",
          "description": "Slack webhook integration sends alerts with severity routing",
          "mapped_to_task": "Feature 1: Slack webhook integration"
        },
        {
          "id": "REQ-2",
          "description": "Email templates generate HTML/text incident reports",
          "mapped_to_task": "Feature 2: Email template system"
        },
        {
          "id": "REQ-3",
          "description": "Automated remediation can restart unhealthy services",
          "mapped_to_task": "Feature 3: Automated remediation system"
        },
        {
          "id": "REQ-4",
          "description": "Incident response playbooks run predefined fix sequences",
          "mapped_to_task": "Feature 4: Incident response playbooks"
        },
        {
          "id": "REQ-5",
          "description": "Notification service abstraction allows easy addition of new channels",
          "mapped_to_task": "Feature 5: Notification service abstraction"
        },
        {
          "id": "REQ-6",
          "description": "E2E tests verify notification delivery and remediation execution",
          "mapped_to_task": "Feature 6: E2E test coverage"
        }
      ]
    }
  },
  "documentation_update_instructions": {
    "story_file": "/home/lem/dev/agent_monitor/_bmad-output/implementation-artifacts/stories/tool-integration.story.md",
    "task_list_file": "this JSON file",
    "synchronization_rules": [
      {
        "rule": "Update Story",
        "description": "When completing a requirement, update the corresponding checkbox in the original BMAD story file",
        "action": "Update story file's acceptance_criteria section"
      },
      {
        "rule": "Update Task List",
        "description": "Mark features as passes: true in this JSON as implementation progresses",
        "action": "Update the passes field in features array"
      },
      {
        "rule": "Add Vital Documentation",
        "description": "If new technical decisions, API endpoints, or architectural patterns emerge, document them in both files",
        "action": "Add to story's technical_context AND this JSON's documentation section"
      }
    ],
    "why_important": [
      "Enables comprehensive BMAD code review workflow to trace everything back to original story",
      "Preserves traceability across the Ralph loop and code review lifecycle",
      "Prevents information loss between Ralph iterations and code review",
      "Reduces chance of agents inappropriately modifying test definitions (JSON is harder to modify than markdown)"
    ]
  },
  "completion_instructions": {
    "promise_format": "<promise>COMPLETE</promise>",
    "loop_behavior": "Work iteratively until ALL acceptance criteria are met and verified",
    "post_iteration_actions": [
      "Implement requirements in order",
      "Run tests and fix failures",
      "Update both original BMAD story file AND this JSON file with progress",
      "Verify implementation against requirements"
    ],
    "completion_criteria": [
      "All acceptance criteria satisfied",
      "All tests pass",
      "All features marked passes: true",
      "Documentation updated in both story and task list"
    ],
    "output_promise": "When genuinely complete and all criteria satisfied, output exactly: <promise>COMPLETE</promise>",
    "warning": "DO NOT output the promise until all acceptance criteria are truly satisfied"
  },
  "features": [
    {
      "category": "functional",
      "description": "Slack webhook integration sends alerts with severity routing",
      "steps": [
        "Create Slack webhook client module with rate limiting",
        "Implement severity-based routing (critical, warning, info)",
        "Integrate notification dispatcher with Slack client",
        "Add webhook configuration management",
        "Implement error handling and retry logic"
      ],
      "passes": true,
      "requirement_id": "REQ-1",
      "mapped_from": "tool-integration-2024-02"
    },
    {
      "category": "functional",
      "description": "Email templates generate HTML/text incident reports",
      "steps": [
        "Integrate Resend/SendGrid email service",
        "Design HTML incident report template",
        "Create text-only fallback template",
        "Implement template rendering with incident context",
        "Add email sending pipeline with SMTP/API integration"
      ],
      "passes": true,
      "requirement_id": "REQ-2",
      "mapped_from": "tool-integration-2024-02"
    },
    {
      "category": "functional",
      "description": "Automated remediation can restart unhealthy services",
      "steps": [
        "Implement service health detection",
        "Create service restart executor",
        "Add safety checks before restart (graceful shutdown)",
        "Log remediation attempts and outcomes",
        "Integrate with notification system for remediation alerts"
      ],
      "passes": true,
      "requirement_id": "REQ-3",
      "mapped_from": "tool-integration-2024-02"
    },
    {
      "category": "functional",
      "description": "Incident response playbooks run predefined fix sequences",
      "steps": [
        "Design YAML/JSON playbook DSL for easy authoring",
        "Implement playbook executor with step validation",
        "Create playbook runner with process isolation",
        "Add playbook validation and syntax checking",
        "Integrate Monitor.Console.remediate(url, playbook_id) command"
      ],
      "passes": true,
      "requirement_id": "REQ-4",
      "mapped_from": "tool-integration-2024-02"
    },
    {
      "category": "architectural",
      "description": "Notification service abstraction allows easy addition of new channels",
      "steps": [
        "Define notification service interface/protocol",
        "Implement dispatcher for multiple channels",
        "Add channel registration mechanism",
        "Create factory for instantiating channel clients",
        "Document how to add new notification channels"
      ],
      "passes": true,
      "requirement_id": "REQ-5",
      "mapped_from": "tool-integration-2024-02"
    },
    {
      "category": "quality",
      "description": "E2E tests verify notification delivery and remediation execution",
      "steps": [
        "Create test fixtures for Slack webhook and email services",
        "Implement E2E test for notification delivery flow",
        "Add test for automated remediation execution",
        "Create test for playbook execution with process isolation",
        "Verify E2E tests pass in CI/CD pipeline"
      ],
      "passes": true,
      "requirement_id": "REQ-6",
      "mapped_from": "tool-integration-2024-02"
    }
  ]
}
